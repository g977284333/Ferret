# 安装依赖并启动服务器

## 问题诊断

**ERR_CONNECTION_REFUSED** 表示服务器没有运行。

**原因**: Flask等依赖包未安装，导致服务器无法启动。

## 解决步骤

### 步骤1: 安装依赖

在终端中执行以下命令：

```bash
# 进入项目根目录
cd /Users/chen/WorkSpace/gechen/Ferret

# 安装项目依赖
pip3 install -r requirements.txt

# 进入前端目录
cd frontend/web

# 安装前端依赖
pip3 install -r requirements.txt
```

### 步骤2: 验证安装

检查Flask是否安装成功：

```bash
python3 -c "import flask; print('Flask已安装，版本:', flask.__version__)"
```

如果显示版本号，说明安装成功。

### 步骤3: 启动服务器

```bash
cd /Users/chen/WorkSpace/gechen/Ferret/frontend/web
python3 app.py
```

### 步骤4: 访问系统

服务器启动后，在浏览器访问：
- http://localhost:5000

## 如果安装遇到问题

### 问题1: pip3 命令不存在

尝试使用 `pip` 而不是 `pip3`：

```bash
pip install -r requirements.txt
```

### 问题2: 权限错误

使用 `--user` 参数：

```bash
pip3 install --user -r requirements.txt
```

### 问题3: 网络问题

使用国内镜像源：

```bash
pip3 install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

### 问题4: 某些包安装失败

可以单独安装核心依赖：

```bash
pip3 install Flask Flask-CORS pandas numpy pytrends
```

## 快速启动脚本

我已经创建了启动脚本，它会自动检查并安装依赖：

```bash
cd /Users/chen/WorkSpace/gechen/Ferret/frontend/web
./start_server.sh
```

## 验证服务器运行

启动成功后，你应该看到：

```
==================================================
Ferret Flask 服务器启动
==================================================
工作目录: /Users/chen/WorkSpace/gechen/Ferret/frontend/web
静态文件目录: static
模板目录: templates
静态文件目录存在: True
模板目录存在: True
找到 8 个模板文件
==================================================
访问地址: http://localhost:5000
测试路由: http://localhost:5000/test
按 Ctrl+C 停止服务器
==================================================

 * Running on http://0.0.0.0:5000
 * Debug mode: on
```

看到 "Running on http://0.0.0.0:5000" 就说明服务器已经启动了！
