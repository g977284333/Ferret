# 服务器启动说明

## 问题：ERR_CONNECTION_REFUSED

这个错误表示服务器没有运行。请按照以下步骤操作：

## 方法1：使用启动脚本（推荐）

### macOS/Linux:
```bash
cd frontend/web
./start_server.sh
```

### Windows:
```bash
cd frontend\web
start_server.bat
```

## 方法2：手动启动

### 步骤1：安装依赖

```bash
# 1. 安装项目根目录的依赖
cd /Users/chen/WorkSpace/gechen/Ferret
pip3 install -r requirements.txt

# 2. 安装前端依赖
cd frontend/web
pip3 install -r requirements.txt

# 3. 安装 itunes-app-scraper（如果上面的安装失败）
pip3 install git+https://github.com/digitalmethodsinitiative/itunes-app-scraper.git
```

### 步骤2：启动服务器

```bash
cd frontend/web
python3 app.py
```

### 步骤3：访问系统

服务器启动后，在浏览器中访问：
- http://localhost:5000
- 或 http://127.0.0.1:5000

## 验证服务器是否运行

启动后，你应该看到类似以下输出：

```
Flask应用启动在: /Users/chen/WorkSpace/gechen/Ferret/frontend/web
静态文件目录: static
模板目录: templates
访问地址: http://localhost:5000
 * Running on http://0.0.0.0:5000
 * Debug mode: on
```

## 常见问题

### 1. 端口被占用

如果5000端口被占用，可以修改端口：

在 `app.py` 最后一行改为：
```python
app.run(debug=True, host='0.0.0.0', port=5001)  # 使用5001端口
```

### 2. 依赖安装失败

如果某些依赖安装失败，可以尝试：
```bash
pip3 install --upgrade pip
pip3 install Flask Flask-CORS pandas numpy pytrends
```

### 3. 模块导入错误

如果出现模块导入错误，确保：
- 在 `frontend/web` 目录下运行
- 项目结构完整
- 所有依赖都已安装

## 测试服务器

启动后，访问测试路由验证：
- http://localhost:5000/test

应该返回JSON响应：
```json
{
  "status": "success",
  "message": "服务器运行正常"
}
```
