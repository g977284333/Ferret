# 诊断403错误

## 问题
访问 http://localhost:5000 时出现 HTTP ERROR 403

## 可能的原因

### 1. 浏览器问题
- **解决方案**: 
  - 清除浏览器缓存（Ctrl+Shift+Delete）
  - 使用无痕模式
  - 尝试不同浏览器（Chrome、Firefox、Edge）
  - 尝试访问 http://127.0.0.1:5000

### 2. 服务器未正确启动
- **检查**: 查看终端输出，确认看到 "Running on http://0.0.0.0:5000"
- **解决方案**: 重新启动服务器

### 3. 端口被占用
- **检查**: 
  ```bash
  lsof -i :5000  # macOS/Linux
  netstat -ano | findstr :5000  # Windows
  ```
- **解决方案**: 停止占用端口的进程，或使用其他端口

### 4. 防火墙/安全软件阻止
- **解决方案**: 
  - 临时关闭防火墙测试
  - 检查安全软件设置

### 5. Flask配置问题
- **测试**: 运行简单测试服务器
  ```bash
  cd frontend/web
  python3 simple_test.py
  ```
  然后访问 http://localhost:5001

## 诊断步骤

### 步骤1: 测试简单服务器
```bash
cd frontend/web
python3 simple_test.py
```
访问 http://localhost:5001

如果简单服务器可以访问，说明问题在app.py的配置

### 步骤2: 检查服务器日志
启动app.py后，查看终端输出：
- 是否有错误信息？
- 是否有 "[请求]" 日志？
- 是否有 "[403错误]" 日志？

### 步骤3: 测试不同路由
尝试访问：
- http://localhost:5000/hello (最简单的路由)
- http://localhost:5000/test (JSON响应)
- http://localhost:5000/api/v1/stats (API路由)

### 步骤4: 使用curl测试
```bash
curl http://localhost:5000/hello
curl http://localhost:5000/test
```

如果curl可以访问，说明是浏览器问题

## 快速修复尝试

### 方法1: 修改端口
在app.py最后一行改为：
```python
app.run(debug=True, host='127.0.0.1', port=5001)
```

### 方法2: 使用127.0.0.1而不是localhost
访问: http://127.0.0.1:5000

### 方法3: 检查hosts文件
确保hosts文件中没有阻止localhost的条目

## 如果还是不行

请提供以下信息：
1. 服务器启动时的完整输出
2. 访问时浏览器控制台（F12）的错误信息
3. curl测试的结果
4. 简单测试服务器的测试结果
